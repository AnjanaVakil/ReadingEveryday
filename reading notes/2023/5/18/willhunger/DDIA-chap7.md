#### 1. The Meaning of ACID
##### Atomicity
多线程中的原子操作：如果某一线程执行原子操作，意味着其它县城无法看到该操作的中间结果。

ACID 中的原子操作：
* 当事务进行中，系统发生了故障，或者违反了某些原子性约束，则事务会中止，数据库会丢弃或撤销局部已完成的更改。
* 原子程序简化了应用程序重试的繁琐检查，有了原子性保证，应用程序可以安全重试。

##### Consistency
一致性在不同场景的不同含义：
* Replcation lag 时的最终一致性问题。
* 一致性哈希
* CAP 理论中的一致性指的是线性化
* ACID，数据库处于应用程序所期待的预期状态。

一致性的保证，需要数据库来定义数据一致性是否合法。例如，外键约束或唯一约束。

##### Isolation
隔离性：并发的多个事务相互隔离，不能互相交叉。
具体实现：必须确保提交事务时的执行结果和串行化执行一致。实践中，由于性能问题很少使用串行化隔离，例如 Oracle 通过快照隔离来实现。

##### Durability
保证事务一旦提交，即使发生故障，事务所写入的任何数据不会消失。

单节点数据库：持久性通常意味着写入了非易失性存储设备，且还涉及到了 WAL。
多节点数据库：Replication 是否已经完成。

##### Replication and Durability
两者都不完美，具体如下：
* 磁盘崩溃时，基于 Replication 系统仍然可用。
* 停机，异常导致所有节点崩溃。
* 异步复制系统中，主节点不可用，最近的写入没有及时同步到其它节点，导致文件丢失。
* 突然断电时，重启后可能无法恢复。
* 数据库存储引擎存在 bug，导致磁盘文件丢失。
* 磁盘上的数据损坏后未能及时检测到。

总之，两类方案都无法提供绝对的持久性保证，可以组合使用两者。