## 第3章 拥抱风险

> Google+将与保护用户隐私相关的数据放置在一个高可用、全球统一的数据存储中（例如，一个全球复制式的类似于SQL 的系统，Spanner），可选数据（不重要的但是能够增加用户体验的数据）放在一个价格更低、可靠性更低和最终一致的数据存储中（例如，Bigtable这种仅仅提供“尽力而为”模式的复制模式的NoSQL存储系统）。

> 金丝雀测试（Canary）的持续时间和大小测试新发布的代码的最好做法就是在一个典型工作负载的服务子集中进行测试，这种做法通常被称为金丝雀测试。

为了基于客观数据做出决策，两个团队需要共同定义一个基于服务水平目标（SLO）的季度错误预算。错误预算提供了一个明确的、客观的指标来决定服务在一个单独的季度中能接受多少不可靠性。这个指标在SRE与产品研发部门的谈判中将政治因素排除。我们的实际做法如下：

● 产品管理层定义一个SLO，确定一项服务在每个季度预计的正常运行时间。

● 实际在线时间是通过一个中立的第三方来测算的：我们的监控系统。

● 这两个数字的差值就是这个季度中剩余的不可靠性预算。

● 只要测算出的正常在线时间高于SLO，也就是说，只要仍然有剩余的错误预算，就可以发布新的版本。