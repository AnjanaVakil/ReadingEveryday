
| 真实世界操作系统 | 描述 |
| --- | --- |
| 调度策略 | 真实的操作系统实现更复杂的调度策略，例如允许进程有优先级，优先运行高优先级的进程，保证公平性和高吞吐量。|
| 避免优先级反转和长队 | 复杂的调度策略可能导致优先级反转和长队，需要采取额外的机制避免这些问题。|
| 避免“唤醒丢失”问题 | xv6在sleep中增加了一个显式锁来避免唤醒丢失的问题。|
| 提高wakeup的效率 | 将sleep和wakeup中的chan替换为包含在该结构上休眠的进程列表的数据结构可以提高效率。|
| 避免雷鸣般的唤醒（thundering herd） | 操作系统会调度所有在特定channel上等待的进程，它们会争先恐后地检查睡眠条件。大多数条件变量都有两种唤醒操作：signal唤醒一个进程，broadcast唤醒所有等待的进程。|
| 使用信号量进行同步 | 信号量常常用于同步。计数通常对应于某种事物，如管道缓冲区中可用的字节数或进程拥有的僵尸子进程的数量。使用显式计数可以避免“唤醒丢失”问题。|
| 进程终止和清理 | 终止进程和清理它们在xv6中引入了很多复杂性。在大多数操作系统中，这个问题更复杂。 |
| kill支持 | xv6对kill的支持不完全满足要求：有一些睡眠循环可能应该检查p->killed。 |
| 寻找空闲proc结构 | 真实的操作系统会在常数时间内通过显式空闲列表找到空闲的proc结构，而不是像allocproc中的线性时间搜索；xv6使用线性扫描以简化操作。|


