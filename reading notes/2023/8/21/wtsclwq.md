#### 二级页表

为什么？

（1）一级页表中最多可容纳 1M（1048576）个页表项，每个页表项是 4 字节，如果页表项全满的话， 便是 4MB 大小。 

（2）一级页表中所有页表项必须要提前建好，原因是操作系统要占用 4GB 虚拟地址空间的高 1GB， 用户进程要占用低 3GB。 

（3）每个进程都有自己的页表，进程一多，光是页表占用的空间就很可观了。

**不要一次性地将全部页表项建好， 需要时动态创建页表项。**

![image-20230821103709739](https://wtsclwq.oss-cn-beijing.aliyuncs.com/image-20230821103709739.png)

二级页表地址转换原理是将 32 位虚拟地址拆分成高 10 位、中间 10 位、低 12 位三部分，它们 的作用是：

- 高 10 位作为页表的索引，用于在页目录表中定位一个页目录项 PDE，页目录项中有页表物理地址， 也就是定位到了某个页表。

- 中间 10 位作为物理页的索引，用于在页表内定位到某个页表项 PTE，页表项中有分 配的物理页地址，也就是定位到了某个物理页。

- 低 12 位作为页内偏移量用于在已经定位到的物理页内寻址。
