### 地址、section、vstart

1. 什么是地址（特指二进制可执行文件源文件中）？

   - 地址只是数字，描述各种符号在源程序中的位置，它是源代码文件中各符号偏移文件开头的距离。

   - **编译器的工作就是给各符号编址。**编译器根据所在硬件平台的特性，将源代码中的每一个符号（指令 和数据）都按照本硬件平台的特性分配空间，**在不考虑对齐的情况下，这些符号在空间上都彼此相邻，连 续分布**，它们在程序中距第一个符号的距离便是它们在程序中的地址。

2. 什么是section？

   - 编译器提供的关键字 Section 只是为了**让程序员在逻辑上将程序划分成几个部分**，因为它是伪指令， CPU 都不知道有这个东西，更不知道咱们交给它执行的代码经过了这很多的“风风雨雨”。

   - 关键字 section 并没有对程序中的地址产生任何影响，即在默 认情况下，有没有 section 都一个样，section 中数据的地址依然是相对于整个文件的顺延，仅仅是在逻辑 上让开发人员梳理程序之用。

3. 什么是vstart？

   - 大概意思是 section 用 `vstart=`来修饰后，可以被赋予一个虚拟起始地址 virtual start address（强调了这 个是虚拟的地址，不过要注意，这与 x86 CPU 中开启分页后的虚拟地址是两码事，不能混为一谈），它被 用来计算在该 section 内的所有内存引用地址。

   - **地址访问策略是根据程序中给出的地址，到地址处去拿东西，所以这个东西要提前在那个地址处准备 好了才行，这是永恒不变的。**程序中给出的地址，最终是要用来访问物理内存的，所以该地址对应的物理 内存必须是你想要的才行，换句话说，必须保证自己想要的东西被加载到那个物理内存位置。

   - 用 vstart 的时机是：我预先知道我的程 序将来被加载到某地址处。程序只有加载到非 0 地址时 vstart 才是有用的，程序默认起始地址是 0。

