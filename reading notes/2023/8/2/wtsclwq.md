### CPU的实模式

#### CPU的基本知识：

CPU 大体上可以划分为 3 个部分，它们是控制单元、运算单元、存储单元。

- 控制单元是 CPU 的控制中心，CPU 需要经过它的帮忙才知道自己下一步要做什么。而控制单元大致由指 令寄存器 IR（Instruction Register）、指令译码器 ID（Instruction Decoder）、操作控制器 OC（Operation Controller） 组成。

- 存储单元是指 CPU 内部的 L1、L2 缓存及寄存器，待处理的数据就存放在这些存储单元中，这里的 数据是说指令中的操作数。

- 运算单元负责算术运算（加减乘除）和逻辑运算（比较、移位），它从控制单元那里接收命令（信号） 并执行，它没有自主意识，只是个执行部件。

![image-20230803112312570](https://wtsclwq.oss-cn-beijing.aliyuncs.com/image-20230803112312570.png)

> 总结下 CPU 的工作原理。控制单元要取下一条待运行的指令，该指令 的地址在程序计数器 PC 中，在 x86CPU 上，程序计数器就是 cs：ip。于是读取 ip 寄存器后，将此地址送上地址 总线，CPU 根据此地址便得到了指令，并将其存入到指令寄存器 IR 中。这时候轮到指令译码器上场了，它根据 指令格式检查指令寄存器中的指令，先确定操作码是什么，再检查操作数类型，若是在内存中，就将相应操作数 从内存中取回放入自己的存储单元，若操作数是在寄存器中就直接用了，免了取操作数这一过程。操作码有了， 操作数也齐了，操作控制器给运算单元下令，开工，于是运算单元便真正开始执行指令了。ip 寄存器的值被加上 当前指令的大小，于是 ip 又指向了下一条指令的地址。接着控制单元又要取下一条指令了，流程回到了本段开 头，CPU 便开始了日复一日的循环，由于 CPU 特别不容易坏，所以唯一它停下来的条件就是停电。
