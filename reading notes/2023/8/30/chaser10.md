
#### step1 了解问题并确定设计范围
不要立即跳出给出一个解决方案。放慢速度，深入思考并提出问题提出正确的问题，做出适当的假设
如果有人要求你设计一个新闻源系统，你要提出一些问题，帮助你明确要求。你和面试官之间的对话可能是这样的：
应聘者：这是一个移动应用程序吗？还是网络应用？还是两者都要？
面试官：两者都有。  
应聘者：对于这个产品来说，最重要的特性是什么？  
面试官：能够发布帖子并查看好友的新闻动态。  
应聘者：新闻动态是按照逆时间顺序排列还是按照特定顺序排列？特定顺序意味着每个帖子都有不同的权重。例如，亲密好友的帖子比群组的帖子更重要。  
面试官：为了保持简单，我们假设新闻动态是按照逆时间顺序排列的。  
应聘者：一个用户能够有多少个好友？  
面试官：5000个。  
应聘者：流量量是多少？  
面试官：每日活跃用户（DAU）为1000万。  
应聘者：新闻动态可以包含图片、视频，还是只能是文本？  
面试官：可以包含媒体文件，包括图片和视频。  
以上是一些你可以向面试官提问的示例问题。了解需求并澄清不明确之处是非常重要的。

#### step2 提出高层设计并获得认可
- 提出设计的初步蓝图，并征求反馈意见。把面试官当作你的队友，一起合作。许多优秀的面试官喜欢交流和参与其中。
- 在白板或纸上绘制带有关键组件的框图。这可能包括客户端（移动端/网页端）、API、Web服务器、数据存储、缓存、CDN、消息队列等。
- 进行信封背面估算，评估你的蓝图是否符合规模限制。大声思考，如果需要进行信封背面估算，请与面试官沟通。
让我们以"设计一个新闻动态系统"来演示如何进行高层设计。在这里，您不需要了解系统的实际工作方式。所有的细节将在第11章中解释。

从高层上讲，该设计分为两个流程：动态发布和新闻动态生成。

- 动态发布：当用户发布一篇帖子时，相应的数据将被写入缓存/数据库，并将该帖子添加到好友的新闻动态中。
- 新闻动态生成：通过按照逆时间顺序聚合好友的帖子来生成新闻动态。![[Pasted image 20230811110551.png]]
![[Pasted image 20230811110744.png]]
#### step3 设计深度挖掘
在这一步中，您和面试官应该已经实现了以下目标：

- 就整体目标和功能范围达成一致
- 概述了整体设计的高层蓝图
- 从面试官那里获得了对高层设计的反馈意见
- 根据面试官的反馈意见，对深入探讨的重点有了一些初步想法

您应该与面试官合作，确定和优先考虑架构中的组件。值得强调的是，每次面试都是不同的。有时，面试官可能会暗示她喜欢关注高层设计。有时，在面对高级候选人时，讨论可能会集中在系统性能特征上，重点关注瓶颈和资源估算。在大多数情况下，面试官可能希望您深入了解一些系统组件的细节。对于URL缩短器来说，深入探讨将涉及将长URL转换为短URL的哈希函数设计。对于聊天系统，如何降低延迟和如何支持在线/离线状态是两个有趣的话题。

#### step4 总结
在这最后一步，面试官可能会问您一些后续问题，或者给您自由讨论其他附加要点的机会。以下是一些可以遵循的方向：

- 面试官可能希望您识别系统的瓶颈并讨论潜在的改进方案。不要说您的设计是完美的，没有可以改进的地方。总是有可以改进的地方。这是展示您的批判性思维并留下良好最终印象的绝佳机会。
- 如果您提出了几种解决方案，向面试官回顾一下您的设计可能会很有用。在长时间的会话之后，提醒面试官可能会有帮助。
- 错误情况（服务器故障、网络丢失等）是值得讨论的。
- 值得提到操作问题。如何监控指标和错误日志？如何部署系统？
- 如何处理下一个规模曲线也是一个有趣的话题。例如，如果您当前的设计支持100万用户，那么为了支持1000万用户，您需要做哪些改变？
- 如果有更多时间，提出您需要的其他改进措施。

应该做的事项
- 总是要求澄清。不要假设您的假设是正确的。
- 理解问题的需求。
- 没有正确答案或最佳答案。设计解决年轻创业公司问题的解决方案与设计解决拥有数百万用户的成熟公司问题的解决方案是不同的。确保您理解需求。
- 让面试官知道您在思考什么。与面试官进行沟通。
- 如果可能，提出多种方法。
- 一旦您与面试官就整体蓝图达成一致，开始详细讨论每个组件。首先设计最关键的组件。
- 向面试官提出想法。优秀的面试官会像队友一样与您合作。
- 永不放弃。

不应该做的事项：

- 不要对典型面试问题准备不足。
- 在澄清需求和假设之前不要急于提出解决方案。
- 不要在一开始过多地详细讨论单个组件。首先给出高层设计，然后再详细展开。
- 如果遇到困难，请毫不犹豫地寻求提示。
- 再次强调，沟通很重要。不要默默思考。
- 不要认为一旦您提出了设计，面试就结束了。直到面试官说结束为止，您才算完成。尽早且经常地寻求反馈。
#### 时间分配
第一步：理解问题并确定设计范围：3-10分钟  
第二步：提出高层设计并获得认可：10-15分钟  
第三步：深入设计：10-25分钟  
第四步：总结：3-5分钟