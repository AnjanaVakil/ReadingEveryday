接口

-   Go 1.18版本之前，所有的接口类型均可用做值类型
-   Go 1.18版本开始，有些接口类型只能被用做类型约束
-   可被用做值类型的接口类型称为基本接口类型



接口类型介绍和类型集（`Type Set`）

-   内嵌在接口类型中的方法描述不能使用空标识符`_`命名
-   Go 1.18引入了一个预声明的类型别名`any`，用来表示空接口类型`interface{}`
-   一个空接口类型的类型集由所有由非接口类型组成



一个空接口类型的类型集由所有由非接口类型组成

-   基本接口类型是指可以用做值类型的接口类型
-   非基本接口类型只能为用做（自定义泛型中使用的）约束接口类型（即类型约束）
-   如果两个无名基本接口类型的方法集是相同的，则这两个类型肯定为同一个类型



值包裹

-   接口值的类型必须为一个基本接口类型
-   一个值类型可能是一个非接口类型，也可能是一个基本接口类型，但肯定不是一个非基本接口类型
-   类型`T`实现了一个（基本）接口类型`I`
    -   类型`T`的值都可以隐式转换到类型`I`（类型`T`的值可以赋给类型`I`的可修改值）
    -   当一个`T`值被转换到类型`I`（或者赋给一个`I`值）的时候
        -   类型`T`是一个非接口类型，则此`T`值的一个复制将被包裹在结果（或者目标）`I`值中。 此操作的时间复杂度为`O(n)`，其中`n`为`T`值的尺寸
        -   类型`T`为一个接口类型，则此`T`值中当前包裹的（非接口）值将被复制一份到结果（或者目标）`I`值中。 官方标准编译器为此操作做了优化，使得此操作的时间复杂度为`O(1)`，而不是`O(n)`
-   包裹在一个接口值中的非接口值的类型信息也和此非接口值一起被包裹在此接口值中
-   当一个非接口值被包裹在一个接口值中，此非接口值称为此接口值的**动态值**，此非接口值的类型称为此接口值的**动态类型**
-   接口值的动态值的直接部分是不可修改的，除非它的动态值被整体替换为另一个动态值
-   非接口类型的`nil`零值也可以被包裹在接口值中；一个包裹了一个`nil`非接口值的接口值不是一个`nil`接口值，因为它并非什么都没包裹
-   任何类型都实现了空接口类型，所以任何非接口值都可以被包裹在任何一个空接口类型的接口值中
-   一个空接口类型的接口值将被称为一个空接口值
-   空接口值和`nil`接口值是两个不同的概念
-   空接口值是`any`类型
-   编译时刻，Go编译器将构建一个全局表用来存储代码中要用到的各个类型的信息
-   对于一个类型来说，这些信息包括：种类（`kind`）、所有方法和字段信息、尺寸，等等。 这个全局表将在程序启动的时候被加载到内存中
-   对于一个非接口类型和接口类型对，它们的实现关系信息包括两部分
    -   动态类型（即此非接口类型）的信息（实现反射的关键）
    -   一个方法表（切片类型），其中存储了所有此接口类型指定的并且为此非接口类型（动态类型）声明的方法（实现多态的关键）



Pp. 231-238