#### 3. Serializable Snapshot Isolation
2PL 可以保证串行化，串行执行的性能差且无法扩展；弱级别隔离性能较好但是容易引发各种边界条件（例如更新丢失，写倾斜，幻读等）。

Serializable Snapshot Isolation 提供了完整的可串行保证，性能比 Snapshot Isolation 的损失较小。

目前，SSI 可用于单节点数据库(PostgreSQL 9.1之后的可串行化隔离）或者分布式数  
据库（如 FoundationDB 采用了类似的算法）。

##### Pessimistic versus optimisitc concurrency control
2PL 设计原则：如果某些操作可能出错（例如与其他并发事务发生了锁冲突）， 那么直接放弃， 采用等待方式直到绝对安全。

SSI 是一种乐观并发机制，如果可能发生潜在冲突，事务会继续执行，当事务提交时（只有可串行化的事务被允许提交），数据库会检查是否确实发生了冲突（即发生了隔离性原则），如果发生冲突，则中止事务并重试。

缺点：如 果冲突很多， 则性能不佳（许多事务试图访问相同的对象）， 大量的事务必须中止。 如果系统已接近其最大吞吐最， 反复重试事务会使系统性能变得更差。

优点：如果系统还有足够的性能提升空间， 且如果事务之间的竞争不大， 乐观并发控制会比悲观方式高效很多。 通过可交换的原子操作还可以减少一些竞争情况。

SSI 是基于快照隔离基础上，新增了相关算法来检测写入之间的可串行化冲突从而决定中止哪些事务。