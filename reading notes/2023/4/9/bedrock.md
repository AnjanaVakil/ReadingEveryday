## B+Tree

- 一种自平衡的树结构，保持数据排序，支持 O(log n) 时间复杂度的 查找、范围查找、插入、删除
  - O(log n) < O(n)，即随着数据增长，搜索时间增长的幅度比数据增长的量级小
- 二叉搜索树的泛化，一个节点能有多于两个的子节点
- B+Tree 是为了以 block 的单位大量读写数据的系统设计的

## B+Tree Properties

- B+Tree 是一种 M-way 搜索树（M-way 指子节点的个数），它的性质如下
  - 完美平衡的（每一个叶子节点都在树的相同的深度）
  - 除了根节点，每一个节点都是半满的（M/2 - 1 <= 数量 <= M - 1）
  - 有 K 的 key 的中间节点有 k + 1 个非空的子节点

## B+Tree Example

<img src="imgs/image-20230409234800429.png"/>

- 一个两层的 B+Tree
- Inner Node：根节点，就是索引
  - Inner Node 的 KV：指针+Key，指针指向叶子结点的地址，key 算是一个范围的划定依据吧
- Leaf Node：叶子节点，存储数据，一个叶子节点可以存储多个数据（K/V），叶子节点之间以指针连接
  - Leaf Node 的 KV：指针 + Key，指针指向这行记录的主键 id 或者，key 是索引建立的列的值
