#### 先确定系统特点
- 上传下载同步文件是主要功能
- 能快速分享文件
- 需要非常高的可用性 在存储系统中 丢失数据是不能忍受的
- 尽量快的文件同步速度
- 可扩展性 高可用

1. 首先最朴素的想法就是在单机服务器维护所有的用户存储文件 以用户id作为用户的根目录
2. 一台服务器不可能无限大 所以可以加一个负载均衡层 将不同用户id给分片到不同的存储服务器 但是一个问题同样明显 难以做扩展 扩展之后无论是一致性哈希 还是什么策略都要面临数据迁移问题 其次还有就是 如果说两个用户转存同一数据文件 那没必要保存两份文件
3. 为了能够更好的扩展 可以把文件 和文件元信息分离  api服务器存取用户元信息（包括哪些文件） 文件元信息（文件包含哪些块 怎么获取这些块）  对象存储服务器用于上传下载文件
4. 为了更细粒度的控制 例如修改了一个文件数据的最后一部分能够不用完整的替换整个文件 可以将文件分块  所以对象存储前加一个分块服务器 用于将文件分块 合并 此时对象存储服务器存储的都是文件的块
5. 存储服务器需要做高可用的冗余备份 分片  冷热分离提高性能